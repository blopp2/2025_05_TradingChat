<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>SnapChart - Chart Analyzer</title>
    <link rel="stylesheet" href="sidebar.css" />
    <script type="module" src="sidebar.js"></script>
  </head>

  <body>
    <div class="sidebar-container">
      <!-- Sticky Header -->
      <header class="sidebar-header">
        <div class="logo-container">
          <img
            src="../icons/snapchart_branding.png"
            alt="SnapChart Logo"
            class="logo"
          />
          <span class="app-title">SnapChart - Chart Analyzer</span>
        </div>
        <button id="logout-btn" class="auth-btn">🚪 Logout</button>
      </header>

      <!-- Main Content -->
      <main class="main-content">
        <!-- Control Card -->
        <div class="card control-card">
          <button id="new-analysis-btn" class="primary-btn wide-btn">
            Analyze this chart
          </button>
          <div id="screenshot-info" class="screenshot-info">
            📋 Last Screenshot: <span id="screenshot-time">none yet</span>
          </div>
          <!-- Usage Info, initially hidden -->
          <div id="usage-info" class="screenshot-info" style="display: none">
            🎟️ Remaining analyses:
            <span id="remaining-count">–</span>
          </div>
        </div>

        <!-- Result Display -->
        <div id="result" class="card result-card">
          <!-- AI analysis will appear here -->
        </div>
      </main>

      <!-- Sticky Footer -->
      <footer class="sidebar-footer">
        <button id="donate-btn" class="secondary-btn">🧡☕ Donate</button>
      </footer>
    </div>

    <!-- Auth Modal -->
    <div id="auth-modal" class="auth-modal hidden">
      <div class="auth-modal-content">
        <span id="auth-modal-close" class="close">&times;</span>
        <h2 id="auth-modal-title">Login</h2>

        <input type="email" id="auth-email" placeholder="Email" required />
        <input
          type="password"
          id="auth-password"
          placeholder="Password"
          required
        />

        <button id="auth-submit-btn" class="primary-btn">Submit</button>
        <div id="auth-toggle" class="auth-toggle">
          ➡️ Need an account? <a href="#" id="switch-to-signup">Sign up</a>
        </div>
        <div id="auth-error" class="auth-error"></div>
      </div>
    </div>

    <!-- Status Indicator -->
    <div id="status" class="status-indicator" style="display: none">
      ⌛️ Processing...
    </div>
  </body>
</html>
